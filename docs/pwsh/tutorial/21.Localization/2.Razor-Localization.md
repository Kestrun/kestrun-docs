---
layout: default
parent: Localization
title: Razor Localization
nav_order: 2
---

# Razor Localization

Render localized Razor pages with per-request culture resolution.

## Full source

File: [`pwsh/tutorial/examples/21.2-Razor-Localization.ps1`][21.2-Razor-Localization.ps1]

```powershell
{% include examples/pwsh/21.2-Razor-Localization.ps1 %}
```

## Step-by-step

1. Root: `Initialize-KrRoot` pins the content root for Razor assets.
2. Server: `New-KrServer` and `Add-KrEndpoint` configure the listener.
3. Localization: `Add-KrLocalizationMiddleware` reads string tables from `Assets/i18n`.
4. Razor: `Add-KrPowerShellRazorPagesRuntime` serves pages from `Assets/Pages-Localization` at `/ui`.
5. Start: `Enable-KrConfiguration` commits config and `Start-KrServer` runs.

## Try it

```powershell
# Default culture
curl -i http://127.0.0.1:5000/ui

# Query override (Italian)
curl -i "http://127.0.0.1:5000/ui?lang=it-IT"
```

## Troubleshooting

- If `/ui` returns a 404, verify `Add-KrPowerShellRazorPagesRuntime` is enabled and the `Assets/Pages-Localization` folder exists.
- If the page does not localize, ensure `Add-KrLocalizationMiddleware` runs before the Razor middleware and that `Assets/i18n/<culture>/Messages.psd1`
contains the expected keys.

## References

- [Add-KrLocalizationMiddleware][Add-KrLocalizationMiddleware]
- [Add-KrPowerShellRazorPagesRuntime][Add-KrPowerShellRazorPagesRuntime]
- [Get-KrLocalizedString][Get-KrLocalizedString]
- [Initialize-KrRoot][Initialize-KrRoot]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Start-KrServer][Start-KrServer]
- [Razor Guide][Razor Guide]
- [Localization Guide][Localization Guide]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Localization](./1.Localization)
Next: [_None_](.)

[21.2-Razor-Localization.ps1]: /pwsh/tutorial/examples/21.2-Razor-Localization.ps1
[Add-KrLocalizationMiddleware]: /pwsh/cmdlets/Add-KrLocalizationMiddleware
[Add-KrPowerShellRazorPagesRuntime]: /pwsh/cmdlets/Add-KrPowerShellRazorPagesRuntime
[Get-KrLocalizedString]: /pwsh/cmdlets/Get-KrLocalizedString
[Initialize-KrRoot]: /pwsh/cmdlets/Initialize-KrRoot
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Razor Guide]: /guides/razor
[Localization Guide]: /guides/localization
