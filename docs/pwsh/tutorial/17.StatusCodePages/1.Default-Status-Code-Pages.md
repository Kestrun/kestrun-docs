---
title: Default Status Code Pages
parent: Status Code Pages
nav_order: 1
---

# Default Status Code Pages

Enable built-in error pages so 404, 500, and similar responses return consistent content.

## Full source

File: [`pwsh/tutorial/examples/17.1-StatusCodePages-Default.ps1`][17.1-StatusCodePages-Default.ps1]

```powershell
{% include examples/pwsh/17.1-StatusCodePages-Default.ps1 %}
```

## Step-by-step

1. Logging: Register console logger as default.
2. Server: Create the server host named 'Default Status Code Pages Server'.
3. Listener: Bind to 127.0.0.1:5000.
4. Middleware: Enable default status code pages.
5. Configuration: Apply staged configuration.
6. Routes: Map `/hello` and simple routes that set 404/500/403/401.
7. Start: Start the server.

## Try it

```powershell
curl -i http://127.0.0.1:5000/hello
curl -i http://127.0.0.1:5000/notfound
curl -i http://127.0.0.1:5000/error
curl -i http://127.0.0.1:5000/forbidden
curl -i http://127.0.0.1:5000/unauthorized
curl -i http://127.0.0.1:5000/missing
```

PowerShell equivalents:

```powershell
# 200 OK normal route
Invoke-WebRequest -Uri http://127.0.0.1:5000/hello | Select-Object StatusCode, Content

# Non-2xx examples (avoid exceptions on 4xx/5xx)
Invoke-WebRequest -Uri http://127.0.0.1:5000/notfound    -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/error       -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/forbidden   -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/unauthorized -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/missing     -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
```

## Troubleshooting

| Symptom | Likely cause | Fix |
|--------|---------------|-----|
| Plain text body, not styled | Templates/assets not enabled | Ensure default status code pages are enabled before routes |
| 200 OK for errors | Route writes content after setting status | Use `Write-KrStatusResponse` only, or ensure no body is written |
| No response body for 4xx/5xx | Upstream swallowed content | Verify other middleware isnâ€™t overriding responses |

## References

- [New-KrLogger][New-KrLogger]
- [Add-KrSinkConsole][Add-KrSinkConsole]
- [Register-KrLogger][Register-KrLogger]
- [New-KrServer][New-KrServer]
- [Add-KrEndpoint][Add-KrEndpoint]
- [Enable-KrStatusCodePage][Enable-KrStatusCodePage]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Write-KrTextResponse][Write-KrTextResponse]
- [Write-KrStatusResponse][Write-KrStatusResponse]
- [Start-KrServer][Start-KrServer]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [_None_](.)
Next: [Custom Options](./2.Custom-Options.md)

[17.1-StatusCodePages-Default.ps1]: /pwsh/tutorial/examples/17.1-StatusCodePages-Default.ps1

[New-KrLogger]: /pwsh/cmdlets/New-KrLogger
[Add-KrSinkConsole]: /pwsh/cmdlets/Add-KrSinkConsole
[Register-KrLogger]: /pwsh/cmdlets/Register-KrLogger
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrEndpoint]: /pwsh/cmdlets/Add-KrEndpoint
[Enable-KrStatusCodePage]: /pwsh/cmdlets/Enable-KrStatusCodePage
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Write-KrTextResponse]: /pwsh/cmdlets/Write-KrTextResponse
[Write-KrStatusResponse]: /pwsh/cmdlets/Write-KrStatusResponse
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
