---
title: Content Format
parent: Status Code Pages
nav_order: 5
---

# Content Format

Customize the error content type and HTML body with external templates and variables.

## Full source

File: [`pwsh/tutorial/examples/17.5-StatusCodePages-ContentFormat.ps1`][17.5-StatusCodePages-ContentFormat.ps1]

```powershell
{% include examples/pwsh/17.5-StatusCodePages-ContentFormat.ps1 %}
```

## Step-by-step

1. Logging: Register a console logger.
2. Template: Load HTML and inject runtime variables (e.g., timestamp).
3. Middleware: Enable with `-ContentType` and `-BodyFormat`.
4. Routes: Map `/hello` and demo routes for 404/500/403/401.
5. Start: Apply configuration and start the server.

## Try it

```powershell
curl -i http://127.0.0.1:5000/hello
curl -i http://127.0.0.1:5000/notfound
curl -i http://127.0.0.1:5000/error
curl -i http://127.0.0.1:5000/forbidden
curl -i http://127.0.0.1:5000/unauthorized
```

PowerShell equivalents:

```powershell
Invoke-WebRequest -Uri http://127.0.0.1:5000/hello | Select-Object StatusCode, Content
Invoke-WebRequest -Uri http://127.0.0.1:5000/notfound    -SkipHttpErrorCheck | Select-Object StatusCode, Content | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/error       -SkipHttpErrorCheck | Select-Object StatusCode, Content | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/forbidden   -SkipHttpErrorCheck | Select-Object StatusCode, Content | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/unauthorized -SkipHttpErrorCheck | Select-Object StatusCode, Content | Format-List
```

## Troubleshooting

| Symptom | Likely cause | Fix |
|--------|---------------|-----|
| Literal `{0}` appears in output | Format string not applied | Use `-BodyFormat` with `{0}` placeholder for status code |
| HTML not rendered | Content type mismatch | Set `-ContentType 'text/html; charset=utf-8'` |
| Time or variables not shown | Variable not provided | Double-check template variables and their scope |

## References

- [Enable-KrStatusCodePage][Enable-KrStatusCodePage]
- [Write-KrHtmlResponse][Write-KrHtmlResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Custom Handler (C# Inline)](./4.Custom-Handler-CSharp-Inline.md)
Next: [Redirects](./6.Redirects.md)

[17.5-StatusCodePages-ContentFormat.ps1]: /pwsh/tutorial/examples/17.5-StatusCodePages-ContentFormat.ps1
[Enable-KrStatusCodePage]: /pwsh/cmdlets/Enable-KrStatusCodePage
[Write-KrHtmlResponse]: /pwsh/cmdlets/Write-KrHtmlResponse
