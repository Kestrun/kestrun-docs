---
title: Custom Options
parent: Status Code Pages
nav_order: 2
---

# Custom Options

Configure StatusCodePages behavior via options such as content type, formats, redirects, or re-execution.

## Full source

File: [`pwsh/tutorial/examples/17.2-StatusCodePages-Options.ps1`][17.2-StatusCodePages-Options.ps1]

```powershell
{% include examples/pwsh/17.2-StatusCodePages-Options.ps1 %}
```

## Step-by-step

1. Logging: Register a console logger as default.
2. Server: Create the server host.
3. Listener: Bind to 127.0.0.1:5000.
4. Options: Enable StatusCodePages with desired options (e.g., content type/body format).
5. Routes: Map demo routes that set typical status codes (404/500/403/401).
6. Start: Apply configuration and start the server.

## Try it

```powershell
curl -i http://127.0.0.1:5000/hello
curl -i http://127.0.0.1:5000/missing
curl -i http://127.0.0.1:5000/error
curl -i http://127.0.0.1:5000/forbidden
curl -i http://127.0.0.1:5000/unauthorized
```

PowerShell equivalents:

```powershell
Invoke-WebRequest -Uri http://127.0.0.1:5000/hello | Select-Object StatusCode, Content
Invoke-WebRequest -Uri http://127.0.0.1:5000/missing     -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/error       -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/forbidden   -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
Invoke-WebRequest -Uri http://127.0.0.1:5000/unauthorized -SkipHttpErrorCheck | Select-Object StatusCode | Format-List
```

## Troubleshooting

| Symptom | Likely cause | Fix |
|--------|---------------|-----|
| Wrong content type | `-ContentType` omitted or overridden | Pass `-ContentType` explicitly on `Enable-KrStatusCodePage` |
| Placeholders not replaced | `-BodyFormat` string issue | Use `{0}` for status code and ensure braces arenâ€™t escaped |
| Options ignored | Middleware order incorrect | Call `Enable-KrStatusCodePage` before mapping routes |

## References

- [Enable-KrStatusCodePage][Enable-KrStatusCodePage]
- [Write-KrHtmlResponse][Write-KrHtmlResponse]
- [Write-KrStatusResponse][Write-KrStatusResponse]

---

### Previous / Next

Previous: [Default Status Code Pages](./1.Default-Status-Code-Pages.md)
Next: [Custom Handler (PowerShell)](./3.Custom-Handler-PowerShell.md)

[17.2-StatusCodePages-Options.ps1]: /pwsh/tutorial/examples/17.2-StatusCodePages-Options.ps1
[Enable-KrStatusCodePage]: /pwsh/cmdlets/Enable-KrStatusCodePage
[Write-KrHtmlResponse]: /pwsh/cmdlets/Write-KrHtmlResponse
[Write-KrStatusResponse]: /pwsh/cmdlets/Write-KrStatusResponse
