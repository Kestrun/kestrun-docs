---
title: Redirects
parent: Status Code Pages
nav_order: 6
---

# Redirects

Redirect error responses to friendly routes and render details via templates.

## Full source

File: [`pwsh/tutorial/examples/17.6-StatusCodePages-Redirects.ps1`][17.6-StatusCodePages-Redirects.ps1]

```powershell
{% include examples/pwsh/17.6-StatusCodePages-Redirects.ps1 %}
```

## Step-by-step

1. Logging: Register a console logger.
2. Middleware: Enable with `-LocationFormat '/error/{0}'`.
3. Pages: Map `/error/{statusCode}` and render a template with variables.
4. Routes: Map `/hello` and demo routes; observe browser URL changes.
5. Start: Apply configuration and start the server.

## Try it

```powershell
curl -v http://127.0.0.1:5000/notfound
curl -v http://127.0.0.1:5000/error
curl -v http://127.0.0.1:5000/forbidden
```

PowerShell equivalents:

```powershell
# Using -MaximumRedirection 0 to observe the 302/3xx without following
try { Invoke-WebRequest -Uri http://127.0.0.1:5000/notfound  -MaximumRedirection 0 -ErrorAction Stop } catch { $_.Exception.Response | Format-List StatusCode, Headers }
try { Invoke-WebRequest -Uri http://127.0.0.1:5000/error     -MaximumRedirection 0 -ErrorAction Stop } catch { $_.Exception.Response | Format-List StatusCode, Headers }
try { Invoke-WebRequest -Uri http://127.0.0.1:5000/forbidden -MaximumRedirection 0 -ErrorAction Stop } catch { $_.Exception.Response | Format-List StatusCode, Headers }

# Or follow redirects (default) and inspect final content
Invoke-WebRequest -Uri http://127.0.0.1:5000/notfound  -SkipHttpErrorCheck | Select-Object StatusCode, Content | Format-List
```

## Troubleshooting

| Symptom | Likely cause | Fix |
|--------|---------------|-----|
| No redirect observed | Client auto-follows | Use `-MaximumRedirection 0` or `curl -v` to see 3xx and Location header |
| Wrong destination URL | `-LocationFormat` incorrect | Use `/error/{0}` or desired format with `{0}` placeholder |
| Infinite redirect loop | Redirects target also error | Ensure target route returns 200 OK |

## References

- [Enable-KrStatusCodePage][Enable-KrStatusCodePage]
- [Write-KrHtmlResponse][Write-KrHtmlResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Content Format](./5.Content-Format.md)
Next: [Re-execute](./7.Re-execute.md)

[17.6-StatusCodePages-Redirects.ps1]: /pwsh/tutorial/examples/17.6-StatusCodePages-Redirects.ps1
[Enable-KrStatusCodePage]: /pwsh/cmdlets/Enable-KrStatusCodePage
[Write-KrHtmlResponse]: /pwsh/cmdlets/Write-KrHtmlResponse
