---
title: SignalR (OpenAPI)
parent: OpenApi
nav_order: 22
layout: default
---

# SignalR (OpenAPI)

Document SignalR-adjacent HTTP routes (that trigger hub broadcasts) using OpenAPI.

## Full source

File: [`pwsh/tutorial/examples/10.17-OpenAPI-SignalR.ps1`][10.17-OpenAPI-SignalR.ps1]

```powershell
{% include examples/pwsh/10.17-OpenAPI-SignalR.ps1 %}
```

## Step-by-step

1. Logging: Register a console logger as default.
2. Server: Create a server and listener (IP + port).
3. SignalR: Add hub middleware at `/hubs/kestrun`.
4. Services: Enable scheduling and the Tasks service for long-running operations.
5. OpenAPI: Add document metadata with `Add-KrOpenApiInfo`.
6. Components: Define parameter components and schema components used by route operations.
7. Routes: Map OpenAPI-annotated endpoints that broadcast SignalR logs/events and manage operations.
8. Spec: Add the OpenAPI route, build + validate the document, then start the server.

## Try it

Start the server:

```powershell
pwsh .\docs\_includes\examples\pwsh\10.17-OpenAPI-SignalR.ps1
```

Call a couple of HTTP routes (these broadcast to connected hub clients):

```powershell
curl -i http://127.0.0.1:5000/api/ps/log/Information
curl -i http://127.0.0.1:5000/api/ps/event
```

Fetch the OpenAPI document and open Swagger:

```powershell
curl http://127.0.0.1:5000/openapi/v3.1/openapi.json
Start-Process http://127.0.0.1:5000/swagger
```

## Troubleshooting

| Symptom | Cause | Fix |
|--------|-------|-----|
| Hub path missing from OpenAPI | SignalR hubs are not REST operations | Document the HTTP endpoints that trigger hub events; treat the hub path as runtime infrastructure. |
| Group routes return errors | Client-side demo expectations | Use the included HTML demo and ensure clients are connected before validating group behavior. |
| Operation status never completes | Task args binding or timeouts | Ensure the sample uses `New-KrTask -Arguments` correctly and increase client polling timeout. |

## References

- [Add-KrSignalRHubMiddleware][Add-KrSignalRHubMiddleware]
- [Send-KrSignalRLog][Send-KrSignalRLog]
- [Send-KrSignalREvent][Send-KrSignalREvent]
- [Send-KrSignalRGroupMessage][Send-KrSignalRGroupMessage]
- [Add-KrScheduling][Add-KrScheduling]
- [Add-KrTasksService][Add-KrTasksService]
- [Add-KrOpenApiInfo][Add-KrOpenApiInfo]
- [Add-KrApiDocumentationRoute][Add-KrApiDocumentationRoute]
- [Add-KrOpenApiRoute][Add-KrOpenApiRoute]
- [Build-KrOpenApiDocument][Build-KrOpenApiDocument]
- [Test-KrOpenApiDocument][Test-KrOpenApiDocument]
- [OpenApiPath][OpenApiPath]
- [OpenApiResponse][OpenApiResponse]
- [Start-KrServer][Start-KrServer]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [SSE Broadcast (OpenAPI)](./21.Sse-Broadcast)
Next: _None_

[10.17-OpenAPI-SignalR.ps1]: /pwsh/tutorial/examples/10.17-OpenAPI-SignalR.ps1
[Add-KrSignalRHubMiddleware]: /pwsh/cmdlets/Add-KrSignalRHubMiddleware
[Send-KrSignalRLog]: /pwsh/cmdlets/Send-KrSignalRLog
[Send-KrSignalREvent]: /pwsh/cmdlets/Send-KrSignalREvent
[Send-KrSignalRGroupMessage]: /pwsh/cmdlets/Send-KrSignalRGroupMessage
[Add-KrScheduling]: /pwsh/cmdlets/Add-KrScheduling
[Add-KrTasksService]: /pwsh/cmdlets/Add-KrTasksService
[Add-KrOpenApiInfo]: /pwsh/cmdlets/Add-KrOpenApiInfo
[Add-KrApiDocumentationRoute]: /pwsh/cmdlets/Add-KrApiDocumentationRoute
[Add-KrOpenApiRoute]: /pwsh/cmdlets/Add-KrOpenApiRoute
[Build-KrOpenApiDocument]: /pwsh/cmdlets/Build-KrOpenApiDocument
[Test-KrOpenApiDocument]: /pwsh/cmdlets/Test-KrOpenApiDocument
[OpenApiPath]: /pwsh/cmdlets/OpenApiPath
[OpenApiResponse]: /pwsh/cmdlets/OpenApiResponse
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
