---
title: Tags and External Docs
parent: OpenApi
nav_order: 7
---

# Tags and External Docs

Group operations with tags and attach external documentation links to both the document and specific routes.

## Full source

File: [`pwsh/tutorial/examples/10.7-OpenAPI-Tags.ps1`][10.7-OpenAPI-Tags.ps1]

```powershell
{% include examples/pwsh/10.7-OpenAPI-Tags.ps1 %}
```

## Step-by-step

1. Register console logger and create the server.
2. Add OpenAPI info and define document-level external docs (API portal + extensions).
3. Declare hierarchical tags (OpenAPI 3.2): a root `operations` tag, resource tags like `orders`/`health`, and leaf tags like `orders.read`.
4. Add tag extensions (`x-*`) plus externalDocs extensions for the `orders` tag.
5. Enable configuration and register documentation UIs pointing at the OpenAPI 3.2 endpoint.
6. Build and test the OpenAPI document, then start the server.

## Try it

```powershell
# View the spec with tag metadata
curl http://127.0.0.1:5000/openapi/v3.2/openapi.json | jq .tags

# View the document-level external docs
curl http://127.0.0.1:5000/openapi/v3.2/openapi.json | jq .externalDocs

# Hit tagged endpoints
curl http://127.0.0.1:5000/orders
curl http://127.0.0.1:5000/health

# Browse Swagger UI
# Visit http://127.0.0.1:5000/swagger in your browser
```

## Key Concepts

- **Hierarchical tags (OpenAPI 3.2)**: Use `parent` and `kind` on tags to create a tree (e.g. `operations` → `orders` → `orders.read`).
- **Tag extensions**: Add `x-*` fields on tags and external docs for UI/tooling hints.
- **External docs**: Attach URLs at document level and to tags.
- **Route metadata**: Use `OpenApiPath` (with multiple tags) and `OpenApiResponse` attributes to describe operations.
- **Doc viewers**: Swagger/ReDoc routes render tags and external docs automatically.

## Troubleshooting

**Issue**: Tags not appearing on operations.

- **Solution**: Ensure each function includes `Tags = @('tag1','tag2')` on `[OpenApiPath]`.

**Issue**: External docs link missing.

- **Solution**: Provide a valid `-Url` on `Add-KrOpenApiExternalDoc` or pass `-ExternalDocs` to `Add-KrOpenApiTag` and rebuild the document.

**Issue**: Tag external docs extensions not showing.

- **Solution**: Create the `OpenApiExternalDocs` object via
  `New-KrOpenApiExternalDoc -Extensions $extensions`
  and pass it to `Add-KrOpenApiTag -ExternalDocs`.

**Issue**: Swagger or ReDoc 404s.

- **Solution**: Confirm both `Add-KrApiDocumentationRoute` and `Add-KrOpenApiRoute` are called after `Enable-KrConfiguration`.

## References

- [Add-KrOpenApiInfo][Add-KrOpenApiInfo]
- [Add-KrOpenApiTag][Add-KrOpenApiTag]
- [Add-KrOpenApiExternalDoc][Add-KrOpenApiExternalDoc]
- [New-KrOpenApiExternalDoc][New-KrOpenApiExternalDoc]
- [Add-KrApiDocumentationRoute][Add-KrApiDocumentationRoute]
- [Add-KrOpenApiRoute][Add-KrOpenApiRoute]
- [Build-KrOpenApiDocument][Build-KrOpenApiDocument]
- [Test-KrOpenApiDocument][Test-KrOpenApiDocument]
- [Write-KrJsonResponse][Write-KrJsonResponse]
- [OpenApiPath][OpenApiPath]
- [OpenApiResponse][OpenApiResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Complete Components](./6.Complete-Components.md)
Next: [Document Information](./8.Document-Info.md)

[Add-KrOpenApiInfo]: /pwsh/cmdlets/Add-KrOpenApiInfo
[Add-KrOpenApiTag]: /pwsh/cmdlets/Add-KrOpenApiTag
[Add-KrOpenApiExternalDoc]: /pwsh/cmdlets/Add-KrOpenApiExternalDoc
[New-KrOpenApiExternalDoc]: /pwsh/cmdlets/New-KrOpenApiExternalDoc
[Add-KrApiDocumentationRoute]: /pwsh/cmdlets/Add-KrApiDocumentationRoute
[Add-KrOpenApiRoute]: /pwsh/cmdlets/Add-KrOpenApiRoute
[Build-KrOpenApiDocument]: /pwsh/cmdlets/Build-KrOpenApiDocument
[Test-KrOpenApiDocument]: /pwsh/cmdlets/Test-KrOpenApiDocument
[Write-KrJsonResponse]: /pwsh/cmdlets/Write-KrJsonResponse
[OpenApiPath]: /pwsh/cmdlets/OpenApiPath
[OpenApiResponse]: /pwsh/cmdlets/OpenApiResponse
