---
title: Document Information
parent: OpenApi
nav_order: 8
---

# Document Information

Populate OpenAPI document metadata including title, version, summary, terms of service, contact, license, and server list.

## Servers and server variables

OpenAPI `servers` describe where your API is hosted (local, staging, production, etc.).

Kestrun supports both:

- **Static server URLs** via `Add-KrOpenApiServer -Url ...`
- **Templated server URLs** with variables like `https://{env}.api.example.com`

To define server variables, create one or more variables with `New-KrOpenApiServerVariable` and pass them to `Add-KrOpenApiServer` using `-Variables`.

```powershell
$serverVars = New-KrOpenApiServerVariable -Name 'env' -Default 'dev' -Enum @('dev', 'staging', 'prod') -Description 'Deployment environment'
Add-KrOpenApiServer -Url 'https://{env}.api.example.com' -Description 'Environment-specific endpoint' -Variables $serverVars
Add-KrOpenApiServer -Url 'https://api.example.com' -Description 'Production'
Add-KrOpenApiServer -Url 'https://staging-api.example.com' -Description 'Staging'
Add-KrOpenApiServer -Url '/' -Description 'Self'
```

In the generated document, these appear under `servers[].variables`.

## Full source

File: [`pwsh/tutorial/examples/10.8-OpenAPI-Document-Info.ps1`][10.8-OpenAPI-Document-Info.ps1]

```powershell
{% include examples/pwsh/10.8-OpenAPI-Document-Info.ps1 %}
```

## Step-by-step

1. Configure console logger and create server instance with `New-KrServer`.
2. Configure endpoint with `Add-KrEndpoint` specifying port and IP address.
3. Set document metadata with `Add-KrOpenApiInfo` (title, version, description, summary, terms).
4. Add contact and license information via `Add-KrOpenApiContact` and `Add-KrOpenApiLicense` (optionally including `-Extensions` for `x-*` metadata).
5. Define server endpoints using `Add-KrOpenApiServer`, including templated environment variables via `New-KrOpenApiServerVariable`.
6. Add top-level external documentation link with `Add-KrOpenApiExternalDoc`.
7. Enable configuration and register documentation routes (Swagger, ReDoc, OpenAPI endpoint).
8. Create a route function `getApiInfo` that retrieves and returns document metadata using `Get-KrOpenApiDocument`.
9. Build and validate the OpenAPI document with `Build-KrOpenApiDocument` and `Test-KrOpenApiDocument`.
10. Start the server with `Start-KrServer`.

## Try it

```powershell
# Fetch the document metadata route
curl http://127.0.0.1:5001/info

# Inspect servers/contact/license in the spec
curl http://127.0.0.1:5001/openapi/v1/openapi.json | jq '{info, servers}'

# Browse Swagger UI
# Visit http://127.0.0.1:5001/swagger in your browser
```

## Key Concepts

- **Document Info**: Title, version, description, summary, and terms of service for the API.
- **Contact & License**: Standard OpenAPI metadata for ownership and usage terms.
 Contact supports vendor extensions via `Add-KrOpenApiContact -Extensions` (keys must start with `x-`).
 For licenses, you can use either `-Url` or the OpenAPI 3.1/3.2 `-Identifier` (SPDX).
- **Servers**: Multiple deployment endpoints plus templated server variables.
- **External Docs**: Optional top-level links to guides or handbooks.

## Troubleshooting

**Issue**: Contact or license missing in the rendered spec.

- **Solution**: Confirm `Add-KrOpenApiContact` and `Add-KrOpenApiLicense` are called before `Build-KrOpenApiDocument`.

**Issue**: Servers not showing up.

- **Solution**: Ensure `Add-KrOpenApiServer` is invoked for each endpoint and that server variables have defaults.

**Issue**: Swagger UI returns 404.

- **Solution**: Verify `Enable-KrConfiguration`, `Add-KrApiDocumentationRoute`, and `Add-KrOpenApiRoute` run before starting the server.

## References

- [Add-KrOpenApiInfo][Add-KrOpenApiInfo]
- [Add-KrOpenApiContact][Add-KrOpenApiContact]
- [Add-KrOpenApiLicense][Add-KrOpenApiLicense]
- [Add-KrOpenApiServer][Add-KrOpenApiServer]
- [New-KrOpenApiServerVariable][New-KrOpenApiServerVariable]
- [Add-KrOpenApiExternalDoc][Add-KrOpenApiExternalDoc]
- [Add-KrApiDocumentationRoute][Add-KrApiDocumentationRoute]
- [Add-KrOpenApiRoute][Add-KrOpenApiRoute]
- [Build-KrOpenApiDocument][Build-KrOpenApiDocument]
- [Test-KrOpenApiDocument][Test-KrOpenApiDocument]
- [Write-KrJsonResponse][Write-KrJsonResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [Tags and External Docs](./7.Tags-and-Docs.md)
Next: [Component Headers](./9.Component-Headers.md)

[Add-KrOpenApiInfo]: /pwsh/cmdlets/Add-KrOpenApiInfo
[Add-KrOpenApiContact]: /pwsh/cmdlets/Add-KrOpenApiContact
[Add-KrOpenApiLicense]: /pwsh/cmdlets/Add-KrOpenApiLicense
[Add-KrOpenApiServer]: /pwsh/cmdlets/Add-KrOpenApiServer
[New-KrOpenApiServerVariable]: /pwsh/cmdlets/New-KrOpenApiServerVariable
[Add-KrOpenApiExternalDoc]: /pwsh/cmdlets/Add-KrOpenApiExternalDoc
[Add-KrApiDocumentationRoute]: /pwsh/cmdlets/Add-KrApiDocumentationRoute
[Add-KrOpenApiRoute]: /pwsh/cmdlets/Add-KrOpenApiRoute
[Build-KrOpenApiDocument]: /pwsh/cmdlets/Build-KrOpenApiDocument
[Test-KrOpenApiDocument]: /pwsh/cmdlets/Test-KrOpenApiDocument
[Write-KrJsonResponse]: /pwsh/cmdlets/Write-KrJsonResponse
