---
title: Full Server Demo
parent: Demos
nav_order: 1
---

# Full Server Demo

End-to-end: multi listeners (HTTP + HTTPS + named pipe), limits, options, routes, non‑blocking lifecycle.

## Full source

File: [`pwsh/tutorial/examples/14.1-Full-Demo.ps1`][14.1-Full-Demo.ps1]

```powershell
{% include examples/pwsh/14.1-Full-Demo.ps1 %}
```

## Step-by-step

1. Ensure / create development certificate (prompted password).
2. Create server (`-PassThru`).
3. Add HTTP + HTTPS listeners (and named pipe if Windows).
4. Add runtime & enable configuration.
5. Apply limits & options.
6. Map `/health` & `/version` routes.
7. Start non‑blocking and wait for Enter key.
8. Stop & remove server cleanly.

## Highlights

| Aspect | Shown |
|--------|-------|
| Transport variety | HTTP, HTTPS, Named Pipe |
| TLS | Self-signed PFX usage |
| Limits | `MaxRequestBodySize`, connections |
| Options | Runspace sizing, header removal |
| Lifecycle | Non-blocking start / graceful stop |

## Cmdlet references

- [New-KrSelfSignedCertificate][New-KrSelfSignedCertificate]
- [New-KrServer][New-KrServer]
- [Add-KrEndpoint][Add-KrEndpoint]
- [Add-KrNamedPipeListener][Add-KrNamedPipeListener]
- [Set-KrServerLimit][Set-KrServerLimit]
- [Set-KrServerOptions][Set-KrServerOptions]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Start-KrServer][Start-KrServer]
- [Stop-KrServer][Stop-KrServer]
- [Remove-KrServer][Remove-KrServer]

## Troubleshooting

| Symptom | Cause | Fix |
|---------|-------|-----|
| HTTPS listener fails | Wrong cert password | Re-enter password or recreate cert |
| Named pipe missing | Windows only | Skip or use Unix socket alternative |
| High memory | Runspace count high | Lower `-MaxRunspaces` |

See also: [Server Limits](../13.server-configuration/1.Server-Limits) · [Server Options](../13.server-configuration/2.Server-Options) · [Logging](../5.logging/index)

---

### Next

Return to [Tutorial Index](../index).

[14.1-Full-Demo.ps1]: /pwsh/tutorial/examples/14.1-Full-Demo.ps1
[New-KrSelfSignedCertificate]: /pwsh/cmdlets/New-KrSelfSignedCertificate
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrEndpoint]: /pwsh/cmdlets/Add-KrEndpoint
[Add-KrNamedPipeListener]: /pwsh/cmdlets/Add-KrNamedPipeListener
[Set-KrServerLimit]: /pwsh/cmdlets/Set-KrServerLimit
[Set-KrServerOptions]: /pwsh/cmdlets/Set-KrServerOptions
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Stop-KrServer]: /pwsh/cmdlets/Stop-KrServer
[Remove-KrServer]: /pwsh/cmdlets/Remove-KrServer
