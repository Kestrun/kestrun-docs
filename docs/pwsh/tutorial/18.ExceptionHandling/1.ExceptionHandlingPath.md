---
title: Exception Handling Path
parent: Exception Handling
nav_order: 1
---

# Exception Handling Path

Re-execute the pipeline to a fixed error path when an unhandled exception occurs.
This renders a consistent error payload while keeping the original URL and method.

## Full source

File: [`pwsh/tutorial/examples/18.1-ExceptionHandling-Path.ps1`][18.1-ExceptionHandling-Path.ps1]

```powershell
{% include examples/pwsh/18.1-ExceptionHandling-Path.ps1 %}
```

## Step-by-step

1. Logging: Register console logger as default.
2. Server: Create server and listen on loopback with a dynamic port.
3. Exception handling: Enable `Enable-KrExceptionHandling -ExceptionHandlingPath '/error'`.
4. Routes: Map `/hello`, `/throw`, and the handler route `/error`.
5. Response: Return JSON from `/error` including `path` and `method`.
6. Start: Apply configuration and start the server.

## Try it

```powershell
# Happy path
curl -i http://127.0.0.1:5000/hello

# Trigger exception -> re-executes to /error
curl -i http://127.0.0.1:5000/throw
```

PowerShell equivalents:

```powershell
Invoke-WebRequest -Uri http://127.0.0.1:5000/hello -UseBasicParsing | Select-Object StatusCode, Content
Invoke-WebRequest -Uri http://127.0.0.1:5000/throw -UseBasicParsing -SkipHttpErrorCheck | Select-Object StatusCode, Content
```

## Troubleshooting

- Getting a 404 on /error? Ensure the handler route is mapped and appears after enabling exception handling.
- Seeing original path in JSON? That's expected; the middleware re-executes to `/error` but preserves the original URL.

## References

- [Enable-KrExceptionHandling][Enable-KrExceptionHandling]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Write-KrJsonResponse][Write-KrJsonResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Previous: [_None_](.)
Next: [VB.Net Handler](./2.VBNet-Handler.md)

[18.1-ExceptionHandling-Path.ps1]: /pwsh/tutorial/examples/18.1-ExceptionHandling-Path.ps1
[Enable-KrExceptionHandling]: /pwsh/cmdlets/Enable-KrExceptionHandling
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Write-KrJsonResponse]: /pwsh/cmdlets/Write-KrJsonResponse
