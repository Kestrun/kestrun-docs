---
title: Full Demo
parent: Authentication
nav_order: 13
---

# Full Demo

Integrated example combining Basic, API Key, JWT, Cookies, claims & policies.

## Full source

File: [`Authentication.ps1`][Authentication-Full]

> The full script is large; earlier chapters break it into focused pieces. Review for orchestration patterns.

```powershell
{% include examples/pwsh/8.12-Full-Demo.ps1 %}
```

## Step-by-step

1. Configure logging, server options & limits.
2. Add listeners (HTTP + HTTPS if cert available).
3. Register all auth schemes (Basic, API Key, JWT, Cookies, Windows).*
4. Build claim policy set (create/read/write/delete/admin).
5. Enable configuration.
6. Map grouped secure routes & token issuance endpoints.
7. Start server.

*Windows auth requires platform support.

## Try it

See inline examples at top of the script for a comprehensive sequence generating Basic header, API key, issuing JWT token,
renewing, and performing cookie login.

## References

Aggregate of previous chapter references; see:

- [Basic (PowerShell)][Basic (PowerShell)]
- [Basic (C# / VB.NET)][Basic (C# / VB.NET)]
- [API Key][API Key]
- [JWT Tokens][JWT Tokens]
- [Cookies][Cookies]
- [Windows Authentication][Windows Authentication]
- [Claims & Policies][Claims & Policies]

## Troubleshooting

| Symptom                      | Cause                            | Fix                                          |
| ---------------------------- | -------------------------------- | -------------------------------------------- |
| One scheme works others fail | Misordered registration / enable | Register all before `Enable-KrConfiguration` |
| Token renewal fails          | Invalid bearer on renew route    | Use original or unexpired token              |
| Cookie route 401             | Session not persisted            | Reuse same WebRequestSession                 |

---

### Previous / Next

{: .fs-4 .fw-500}

- Previous: [OpenID Connect (Duende Demo)][Prev]
- Next

Continue with server internals:

- Start with [Server Limits](../13.server-configuration/1.Server-Limits)
- Then [Server Options](../13.server-configuration/2.Server-Options)
- Or skip ahead to [Start / Stop Lifecycle](../14.lifecycle/1.Start-Stop)

[Authentication-Full]: https://github.com/Kestrun/Kestrun/blob/main/examples/PowerShell/Authentication/Authentication.ps1
[Basic (PowerShell)]: ./1.Basic-PS
[Basic (C# / VB.NET)]: ./2.Basic-MultiLang
[API Key]: ./3.Api-Key
[JWT Tokens]: ./4.Jwt
[Cookies]: ./5.Cookies
[Windows Authentication]: ./6.Windows-Authentication
[Claims & Policies]: ./7.Claims-Policies
[Prev]: ./12.OpenID-Connect
