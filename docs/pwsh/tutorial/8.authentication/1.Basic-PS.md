---
title: Basic (PowerShell)
parent: Authentication
nav_order: 1
---

# Basic Authentication (PowerShell)

Define a Basic auth scheme with a PowerShell script block validating username/password.

> Prerequisites: see [Introduction][Introduction].

## Full source

File: [`pwsh/tutorial/examples/8.1-Basic-PS.ps1`][8.1-Basic-PS.ps1]

```powershell
{% include examples/pwsh/8.1-Basic-PS.ps1 %}
```

## Step-by-step

1. Create server & listener (HTTP 5000).
2. Define a Basic scheme with `Add-KrBasicAuthentication -ScriptBlock`.
3. Enable configuration.
4. Protect route group prefix `/secure/ps` with the scheme.
5. Map `/hello` route returning user identity.
6. Start server.

## Try it

```powershell
$creds = 'admin:password'
$basic = 'Basic ' + [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes($creds))
Invoke-WebRequest -Uri http://127.0.0.1:5000/secure/ps/hello -Headers @{ Authorization = $basic } |
  Select-Object -ExpandProperty Content
```

Expected: greeting containing username.

## Cmdlet references

- [Add-KrBasicAuthentication][Add-KrBasicAuthentication]
- [Add-KrRouteGroup][Add-KrRouteGroup]
- [Add-KrMapRoute][Add-KrMapRoute]
- [New-KrServer][New-KrServer]
- [Add-KrEndpoint][Add-KrEndpoint]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Start-KrServer][Start-KrServer]

## Troubleshooting

| Symptom          | Cause                    | Fix                                    |
| ---------------- | ------------------------ | -------------------------------------- |
| 401 Unauthorized | Missing/invalid header   | Supply `Authorization: Basic <base64>` |
| Always 401       | Script block logic wrong | Validate credential comparison         |
| Empty identity   | No authenticated user    | Ensure scheme name matches route group |

See also: [Endpoints](../7.endpoints/index) Â· [Logging](../5.logging/1.Simple-Logging)

---

### Next

Continue to [Basic (C# / VB.NET)](./2.Basic-MultiLang).

[8.1-Basic-PS.ps1]: /pwsh/tutorial/examples/8.1-Basic-PS.ps1
[Add-KrBasicAuthentication]: /pwsh/cmdlets/Add-KrBasicAuthentication
[Add-KrRouteGroup]: /pwsh/cmdlets/Add-KrRouteGroup
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrEndpoint]: /pwsh/cmdlets/Add-KrEndpoint
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Introduction]: ../1.introduction/index#prerequisites
