---
title: Process Probe
parent: Health
nav_order: 4
---

# Process Probe

Executes an external process (`dotnet --info`) and reports its success & duration. Useful to validate required tooling or a helper binary.

## Full source

File: [`pwsh/tutorial/examples/16.4-Health-Process-Probe.ps1`][16.4-Health-Process-Probe.ps1]

```powershell
{% include examples/pwsh/16.4-Health-Process-Probe.ps1 %}
```

## Key Points

- `-Kind Process` selects the process probe.
- `-FileName` and optional `-Arguments` control the command executed.
- Non‑zero exit codes produce `Unhealthy`.
- Duration automatically captured; you can still add custom data via script probes if needed.

## Try It

```powershell
Invoke-RestMethod http://127.0.0.1:5003/healthz | ConvertTo-Json -Depth 4
```

Break it by using an invalid executable name; observe `Unhealthy` state.

## Troubleshooting

| Symptom | Cause | Fix |
|---------|-------|-----|
| Probe hangs | Long‑running process | Wrap with a script probe and enforce custom timeout logic |
| Permission denied | Execution policy / ACL | Run with appropriate permissions or adjust policy |

## Cmdlet references

- [New-KrLogger][New-KrLogger]
- [New-KrServer][New-KrServer]
- [Add-KrListener][Add-KrListener]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrHealthProcessProbe][Add-KrHealthProcessProbe]
- [Add-KrHealthEndpoint][Add-KrHealthEndpoint]
- [Start-KrServer][Start-KrServer]
- [New-KrProbeResult][New-KrProbeResult]

[16.4-Health-Process-Probe.ps1]: /pwsh/tutorial/examples/16.4-Health-Process-Probe.ps1
[New-KrLogger]: /pwsh/cmdlets/New-KrLogger
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrListener]: /pwsh/cmdlets/Add-KrListener
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrHealthProcessProbe]: /pwsh/cmdlets/Add-KrHealthProcessProbe
[Add-KrHealthEndpoint]: /pwsh/cmdlets/Add-KrHealthEndpoint
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[New-KrProbeResult]: /pwsh/cmdlets/New-KrProbeResult
