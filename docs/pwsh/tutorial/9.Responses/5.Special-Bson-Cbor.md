---
title: Special Formats (BSON / CBOR)
parent: Responses
nav_order: 5
---

# Special Formats (BSON / CBOR)

Binary object encodings for compact storage or specialized clients.

## Full source

File: [`pwsh/tutorial/examples/9.5-Bson-Cbor.ps1`][9.5-Bson-Cbor.ps1]

```powershell
{% include examples/pwsh/9.5-Bson-Cbor.ps1 %}
```

## Step-by-step

1. Server & listener on 5095.
2. `/bson`: serialize object to BSON.
3. `/cbor`: serialize object to CBOR.
4. Start server.

## Try it

```powershell
curl http://127.0.0.1:5095/bson --output payload.bson
curl http://127.0.0.1:5095/cbor --output payload.cbor
```

PowerShell equivalents:

```powershell
# BSON
Invoke-WebRequest -Uri http://127.0.0.1:5095/bson -OutFile out.bson
# CBOR
Invoke-WebRequest -Uri http://127.0.0.1:5095/cbor -OutFile out.cbor
# Plain fallback
Invoke-WebRequest -Uri http://127.0.0.1:5095/plain | Select -Expand Content
```

## BSON

```powershell
Add-KrMapRoute -Path '/bson' -Method GET -ScriptBlock {
    [pscustomobject]@{ kind='bson'; ts=(Get-Date) } | Write-KrBsonResponse -ContentType 'application/bson'
}
```

## CBOR

```powershell
Add-KrMapRoute -Path '/cbor' -Method GET -ScriptBlock {
    [pscustomobject]@{ kind='cbor'; ts=(Get-Date) } | Write-KrCborResponse -ContentType 'application/cbor'
}
```

### When to use

- IoT / constrained bandwidth
- Non-text protocols
- Interop with existing BSON/CBOR consumers

### References

- [Write-KrBsonResponse](/pwsh/cmdlets/Write-KrBsonResponse)
- [Write-KrCborResponse](/pwsh/cmdlets/Write-KrCborResponse)

---

### Previous / Next

Previous: [HTML Templates & Files](./4.Html-Templates-Files)
Next: [Redirects](./6.Redirects)

[9.5-Bson-Cbor.ps1]: /pwsh/tutorial/examples/9.5-Bson-Cbor.ps1
