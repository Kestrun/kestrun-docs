---
title: HTML Templates & Files
parent: Responses
nav_order: 4
---

# HTML Templates & File Downloads

Render dynamic HTML or return files with proper headers.

## Full source

File: [`pwsh/tutorial/examples/9.4-Html-Files.ps1`][9.4-Html-Files.ps1]

```powershell
{% include examples/pwsh/9.4-Html-Files.ps1 %}
```

## Step-by-step

1. Server & listener on 5094.
2. `/page`: renders HTML file with variable substitution.
3. `/inline`: renders inline template string.
4. `/download`: sends file with attachment disposition & custom filename.
5. Start server.

## Try it

```powershell
curl http://127.0.0.1:5094/page
curl http://127.0.0.1:5094/inline
curl -I http://127.0.0.1:5094/download
curl http://127.0.0.1:5094/download --output report.txt
```

PowerShell equivalents:

```powershell
Invoke-WebRequest -Uri http://127.0.0.1:5094/page    | Select -Expand Content
Invoke-WebRequest -Uri http://127.0.0.1:5094/inline  | Select -Expand Content
Invoke-WebRequest -Uri http://127.0.0.1:5094/download -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5094/download -OutFile report.txt
```

## HTML File

```powershell
Add-KrMapRoute -Path '/page' -Method GET -ScriptBlock {
    Write-KrHtmlResponse -FilePath 'Assets/wwwroot/files/template.html' -Variables @{ Title='Sample'; Body='Hello HTML' }
}
```

## Inline Template

```powershell
Add-KrMapRoute -Path '/template' -Method GET -ScriptBlock {
    $tpl = '<html><h1>{{Title}}</h1><p>{{Body}}</p></html>'
    Write-KrHtmlResponse -Template $tpl -Variables @{ Title='Inline'; Body='Rendered' }
}
```

## File Download

```powershell
Add-KrMapRoute -Path '/download' -Method GET -ScriptBlock {
    Write-KrFileResponse -FilePath 'Assets/wwwroot/files/sample.txt' -FileDownloadName 'report.txt' -ContentDisposition Attachment -StatusCode 200
}
```

### References

- [Write-KrHtmlResponse](/pwsh/cmdlets/Write-KrHtmlResponse)
- [Write-KrFileResponse](/pwsh/cmdlets/Write-KrFileResponse)

---

### Previous / Next

Previous: [Binary & Stream](./3.Binary-Stream)
Next: [Special Formats (BSON / CBOR)](./5.Special-Bson-Cbor)

[9.4-Html-Files.ps1]: /pwsh/tutorial/examples/9.4-Html-Files.ps1
