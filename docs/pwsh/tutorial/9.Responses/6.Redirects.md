---
title: Redirects
parent: Responses
nav_order: 6
---

# Redirect Responses

Send 3xx status and a Location header using `Write-KrRedirectResponse`.

## Full source

File: [`pwsh/tutorial/examples/9.6-Redirects.ps1`][9.6-Redirects.ps1]

```powershell
{% include examples/pwsh/9.6-Redirects.ps1 %}
```

## Step-by-step

1. Server & listener on 5096.
2. `/old`: issues redirect with message body.
3. Start server.

## Try it

```powershell
curl -i http://127.0.0.1:5096/old
```

PowerShell equivalents:

```powershell
# HEAD-style (inspect headers) using -Method Head
Invoke-WebRequest -Uri http://127.0.0.1:5096/temp-redirect -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5096/permanent-redirect -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5096/local -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5096/default -Method Head | Select -Expand RawContent

# Follow redirect and view final body
Invoke-WebRequest -Uri http://127.0.0.1:5096/default | Select -Expand Content
```

```powershell
Add-KrMapRoute -Path '/old' -Method GET -ScriptBlock {
    Write-KrRedirectResponse -Url 'https://example.com/new' -Message 'Resource moved'
}
```

Default status code is typically 302. Use low-level middleware (future enhancement) if you require 301/307/308 variants.

## References

- [Write-KrRedirectResponse](/pwsh/cmdlets/Write-KrRedirectResponse)

---

### Previous / Next

Previous: [Special Formats (BSON / CBOR)](./5.Special-Bson-Cbor)
Next: [Errors](./7.Errors)

[9.6-Redirects.ps1]: /pwsh/tutorial/examples/9.6-Redirects.ps1
