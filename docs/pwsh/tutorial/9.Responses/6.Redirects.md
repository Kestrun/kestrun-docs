---
title: Redirects
parent: Responses
nav_order: 6
---

# Redirect Responses

Send 3xx status and a Location header using `Write-KrRedirectResponse`.

## Full source

File: [`pwsh/tutorial/examples/9.6-Redirects.ps1`][9.6-Redirects.ps1]

```powershell
{% include examples/pwsh/9.6-Redirects.ps1 %}
```

## Step-by-step

1. Logging: Register console logger as default.
2. Server: Create server named 'Responses 9.6'.
3. Listener: Listen on 127.0.0.1:5000.
4. Runtime: Add PowerShell runtime.
5. `/old`: issues redirect with message body.
6. Enable configuration and start server.

## Try it

```powershell
curl -i http://127.0.0.1:5000/old
```

PowerShell equivalents:

```powershell
# HEAD-style (inspect headers) using -Method Head
Invoke-WebRequest -Uri http://127.0.0.1:5000/temp-redirect -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5000/permanent-redirect -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5000/local -Method Head | Select -Expand RawContent
Invoke-WebRequest -Uri http://127.0.0.1:5000/default -Method Head | Select -Expand RawContent

# Follow redirect and view final body
Invoke-WebRequest -Uri http://127.0.0.1:5000/default | Select -Expand Content
```

## Example route

```powershell
# Logging
New-KrLogger | Add-KrSinkConsole | Register-KrLogger -Name 'console' -SetAsDefault

# Server
New-KrServer -Name 'Responses 9.6'

# Listener
Add-KrListener -IPAddress '127.0.0.1' -Port 5000

# Runtime
Add-KrPowerShellRuntime

# Enable configuration
Enable-KrConfiguration

# Redirect route
Add-KrMapRoute -Pattern '/old' -Verbs GET -ScriptBlock {
    Write-KrRedirectResponse -Url 'https://example.com/new' -Message 'Resource moved to /new'
}

# Start the server
Start-KrServer
```

Default status code is typically 302. Use low-level middleware (future enhancement) if you require 301/307/308 variants.

## References

- [Write-KrRedirectResponse](/pwsh/cmdlets/Write-KrRedirectResponse)

---

### Previous / Next

Previous: [Special Formats (BSON / CBOR)](./5.Special-Bson-Cbor)
Next: [Errors](./7.Errors)

[9.6-Redirects.ps1]: /pwsh/tutorial/examples/9.6-Redirects.ps1
