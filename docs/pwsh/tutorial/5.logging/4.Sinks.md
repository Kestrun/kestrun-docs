---
title: Sinks (Console/File/JSON)
parent: Logging
nav_order: 4
---

# Sinks (Console/File/JSON)

Wire different outputs for your logs. This sample writes to:

- Console (human-friendly text)
- Rolling text file `logs/sinks-text.log`
- Rolling JSON file `logs/sinks-json.log`

> For more sinks (HTTP, EventLog, Syslog, Seq), see the [Logging guide](/guides/logging).

## Full source

File: [`docs/_includes/examples/pwsh/5.4-Sinks.ps1`][5.4-Sinks.ps1]

```powershell
{% include examples/pwsh/5.4-Sinks.ps1 %}
```

## Step-by-step

1. Create `text` logger with minimum `Information`, add Console + File sinks.
2. Create `json` logger with minimum `Debug`, add File sink with `Get-KrJsonFormatter`.
3. Standard server + listener + PS runtime; then `Enable-KrConfiguration`.
4. Routes:
   - `/text` writes an Information event via `text`.
   - `/json` writes a Debug event with an extra property via `json`.
5. Start with `Start-KrServer`.

## Try it

```powershell
pwsh .\docs\_includes\examples\pwsh\5.4-Sinks.ps1
curl http://127.0.0.1:5003/text
curl http://127.0.0.1:5003/json
Get-Content .\logs\sinks-text.log -Tail 20
Get-Content .\logs\sinks-json.log -Tail 20
```

Expected: `sinks-text.log` contains human-readable events; `sinks-json.log` contains JSON entries.

## Customizing

- Restrict console to higher level: `Add-KrSinkConsole -RestrictedToMinimumLevel Warning`.
- Change rolling interval or retention on file sinks.
- Add HTTP/Syslog/EventLog sinks; add structured properties.
- Set one logger as default or pass to `New-KrServer` to enable Kestrun framework logs.

## Troubleshooting

| Symptom                | Cause                         | Fix                                           |
|------------------------|-------------------------------|-----------------------------------------------|
| Empty JSON file        | No Debug events written       | Lower minimum for `json` or send Debug events |
| Garbled console output | Custom template mismatch      | Remove/adjust OutputTemplate                  |
| File not created       | Path/permissions/empty stream | Check path; trigger requests                  |

## Cmdlet references

- [New-KrLogger][New-KrLogger]
- [Set-KrMinimumLevel][Set-KrMinimumLevel]
- [Get-KrJsonFormatter][Get-KrJsonFormatter]
- [Add-KrSinkFile][Add-KrSinkFile]
- [Add-KrSinkConsole][Add-KrSinkConsole]
- [Register-KrLogger][Register-KrLogger]
- [Write-KrLog][Write-KrLog]
- [New-KrServer][New-KrServer]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Start-KrServer][Start-KrServer]

---

### Next

{: .fs-4 .fw-500}

Previous: [Enrichment & Correlation IDs](./3.Enrichment-Correlation-IDs)
Next: [Sinks (HTTP/EventLog/Syslog)](./5.Sinks-Advanced)
Guide: [Logging (Concepts)](/guides/logging)

[5.4-Sinks.ps1]: /_includes/examples/pwsh/5.4-Sinks.ps1
[New-KrLogger]: /pwsh/cmdlets/New-KrLogger
[Set-KrMinimumLevel]: /pwsh/cmdlets/Set-KrMinimumLevel
[Get-KrJsonFormatter]: /pwsh/cmdlets/Get-KrJsonFormatter
[Add-KrSinkFile]: /pwsh/cmdlets/Add-KrSinkFile
[Add-KrSinkConsole]: /pwsh/cmdlets/Add-KrSinkConsole
[Register-KrLogger]: /pwsh/cmdlets/Register-KrLogger
[Write-KrLog]: /pwsh/cmdlets/Write-KrLog
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
