---
title: Multiple Loggers & Levels
parent: Logging
nav_order: 2
---

# Multiple Loggers & Levels

Run more than one named logger at once and control their verbosity separately.
In this sample we use:

- app logger: Minimum Information, Console + File `logs/app.log`.
- audit logger: Minimum Debug, File `logs/audit.log`.

> Tip: If you need deeper concepts, see the [Logging guide](/guides/logging).

## Full source

File: [`docs/_includes/examples/pwsh/5.2-Multiple-Loggers-Levels.ps1`][5.2-Multiple-Loggers-Levels.ps1]

```powershell
{% include examples/pwsh/5.2-Multiple-Loggers-Levels.ps1 %}
```

## Step-by-step

1. Create the 'app' logger with minimum `Information`, Console + File sinks, then register it as `app`.
2. Create the 'audit' logger with minimum `Debug`, File sink only, register as `audit`.
3. Standard server + listener + PowerShell runtime.
4. Enable configuration with `Enable-KrConfiguration`.
5. Routes:
   - `/info` writes Information to `app`.
   - `/debug` writes Debug to both loggers; `app` filters Debug (not written), `audit` writes it.
   - `/audit` demonstrates an Information event on `audit`.
6. Start server with `Start-KrServer`.

## Try it

Save the sample locally so the log files are easy to find. Copy the contents of
[`docs/_includes/examples/pwsh/5.2-Multiple-Loggers-Levels.ps1`][5.2-Multiple-Loggers-Levels.ps1] into a new file in an
empty working folder (for example, `multi-loggers.ps1`), then run:

```powershell
# From your working folder
pwsh .\multi-loggers.ps1
curl http://127.0.0.1:5000/info
curl http://127.0.0.1:5000/debug
curl http://127.0.0.1:5000/audit
Get-Content .\logs\app.log -Tail 20
Get-Content .\logs\audit.log -Tail 20
```

Expected: Debug lines appear only in `audit.log`; `app.log` shows Information and above.

## Customizing

- Change minimums per logger: `Set-KrMinimumLevel -Value Warning` on one logger.
- Add properties per logger: `Add-KrEnrichProperty -Name 'Logger' -Value 'audit'`.
- Add sinks independently: `app` to Seq, `audit` to file only.
- To enable Kestrun framework logs, use `-SetAsDefault` on either logger or pass `-Logger/-LoggerName` to `New-KrServer`.

## Troubleshooting

| Symptom                       | Cause                                  | Fix                                          |
|-------------------------------|----------------------------------------|----------------------------------------------|
| No debug lines in app.log     | App minimum is Information             | Lower app minimum to Debug                   |
| Nothing in audit.log          | No events at/above minimum or bad path | Trigger events; verify path and permissions  |
| Duplicate console lines       | Multiple console sinks active          | Use one console sink or adjust configuration |
| Cannot delete/rename log file | Logger still open / file handle        | Run `Close-KrLogger`; let the process exit   |

## Cmdlet references

- [New-KrLogger][New-KrLogger]
- [Set-KrMinimumLevel][Set-KrMinimumLevel]
- [Add-KrSinkFile][Add-KrSinkFile]
- [Add-KrSinkConsole][Add-KrSinkConsole]
- [Register-KrLogger][Register-KrLogger]
- [Write-KrLog][Write-KrLog]
- [Close-KrLogger][Close-KrLogger]
- [New-KrServer][New-KrServer]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Start-KrServer][Start-KrServer]

---

### Next

{: .fs-4 .fw-500}

Previous: [Simple Logging](./1.Simple-Logging)
Next: [Enrichment & Correlation IDs](./3.Enrichment-Correlation-IDs)
Guide: [Logging (Concepts)](/guides/logging)

[5.2-Multiple-Loggers-Levels.ps1]: /_includes/examples/pwsh/5.2-Multiple-Loggers-Levels.ps1
[New-KrLogger]: /pwsh/cmdlets/New-KrLogger
[Set-KrMinimumLevel]: /pwsh/cmdlets/Set-KrMinimumLevel
[Add-KrSinkFile]: /pwsh/cmdlets/Add-KrSinkFile
[Add-KrSinkConsole]: /pwsh/cmdlets/Add-KrSinkConsole
[Register-KrLogger]: /pwsh/cmdlets/Register-KrLogger
[Write-KrLog]: /pwsh/cmdlets/Write-KrLog
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Close-KrLogger]: /pwsh/cmdlets/Close-KrLogger
