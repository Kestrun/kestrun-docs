---
title: Hot Reload (Update Logger)
parent: Logging
nav_order: 6
---

# Hot Reload (Update Logger)

Change logging behavior without restarting the server. Two approaches:

- Level switch: control the minimum level dynamically.
- Re-register: re-create and register the same named logger to change sinks/properties.

> Kestrun exposes level switch helpers and multiple sink cmdlets. Re-registering a named logger replaces the old instance safely.

## Full source

File: [`docs/_includes/examples/pwsh/5.6-Hot-Reload.ps1`][5.6-Hot-Reload.ps1]

```powershell
{% include examples/pwsh/5.6-Hot-Reload.ps1 %}
```

## Step-by-step

1. Create a `LoggingLevelSwitch` with `New-KrLevelSwitch -MinimumLevel Information`.
2. Bind it to the logger using `Set-KrMinimumLevel -ControlledBy $levelSwitch`.
3. Route `/log` writes Debug and Information to show effect of changing level.
4. Route `/level/{level}` changes the level at runtime (e.g., Debug, Information, Warning).
5. Route `/reconfigure` builds a new configuration (adds a property, changes min level) and registers it under the same name `app`.

## Try it

Save the sample locally so itâ€™s easy to run. Copy the contents of
[`docs/_includes/examples/pwsh/5.6-Hot-Reload.ps1`][5.6-Hot-Reload.ps1] into a new file in an
empty working folder (for example, `hot-reload.ps1`), then run:

```powershell
# From your working folder
pwsh .\hot-reload.ps1
curl <http://127.0.0.1:5000/log>
curl <http://127.0.0.1:5000/level/Debug>
curl <http://127.0.0.1:5000/log>
curl -Method Post <http://127.0.0.1:5000/reconfigure>
curl <http://127.0.0.1:5000/log>
```

Expected: Debug becomes visible after `/level/Debug`; after `/reconfigure`, only Warning+ are written and the `Reconfigured=true` property appears.

## Notes

- You can attach a `LoggingLevelSwitch` per sink for fine-grained control.
- Re-registering a logger with the same name disposes the previous instance (see LoggerManager).
- To update the Kestrun framework logger, re-register the default logger name or set `-SetAsDefault`.

## Troubleshooting

| Symptom                 | Cause                            | Fix                                          |
|-------------------------|----------------------------------|----------------------------------------------|
| Level not changing      | Wrong enum casing/route value    | Use Debug/Information/Warning/Error/Fatal    |
| Still seeing Debug logs | Level switch not bound to logger | Ensure `-ControlledBy $levelSwitch` is set   |
| No change after POST    | Logger name mismatch             | Re-register with the exact same name (`app`) |

## Cmdlet references

- [New-KrLevelSwitch][New-KrLevelSwitch]
- [Set-KrLevelSwitch][Set-KrLevelSwitch]
- [New-KrLogger][New-KrLogger]
- [Set-KrMinimumLevel][Set-KrMinimumLevel]
- [Add-KrSinkFile][Add-KrSinkFile]
- [Add-KrSinkConsole][Add-KrSinkConsole]
- [Register-KrLogger][Register-KrLogger]
- [Write-KrLog][Write-KrLog]
- [New-KrServer][New-KrServer]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Start-KrServer][Start-KrServer]
- [Close-KrLogger][Close-KrLogger]

---

### Next

{: .fs-4 .fw-500}

Previous: [Sinks (HTTP/EventLog/Syslog)](./5.Sinks-Advanced)
Next: PowerShell vs C# Interop (coming soon)
Guide: [Logging (Concepts)](/guides/logging)

[5.6-Hot-Reload.ps1]: /_includes/examples/pwsh/5.6-Hot-Reload.ps1
[New-KrLevelSwitch]: /pwsh/cmdlets/New-KrLevelSwitch
[Set-KrLevelSwitch]: /pwsh/cmdlets/Set-KrLevelSwitch
[New-KrLogger]: /pwsh/cmdlets/New-KrLogger
[Set-KrMinimumLevel]: /pwsh/cmdlets/Set-KrMinimumLevel
[Add-KrSinkFile]: /pwsh/cmdlets/Add-KrSinkFile
[Add-KrSinkConsole]: /pwsh/cmdlets/Add-KrSinkConsole
[Register-KrLogger]: /pwsh/cmdlets/Register-KrLogger
[Write-KrLog]: /pwsh/cmdlets/Write-KrLog
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Close-KrLogger]: /pwsh/cmdlets/Close-KrLogger
