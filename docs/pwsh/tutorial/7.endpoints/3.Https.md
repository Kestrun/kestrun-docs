---
title: HTTPS & Certificates
parent: Endpoints
nav_order: 3
---

# HTTPS & Certificates

Add TLS with a development self‑signed certificate or an existing PFX.

> Prerequisites: see [Certificates section](../6.certificates/index) for creating a self‑signed cert.

## Full source

File: [`pwsh/tutorial/examples/7.3-Https.ps1`][7.3-Https.ps1]

```powershell
{% include examples/pwsh/7.3-Https.ps1 %}
```

## Step-by-step

1. Ensure / create PFX (dev only) with `New-KrSelfSignedCertificate`.
2. Add HTTP listener (optional) and HTTPS listener with `-CertPath/-CertPassword`.
3. Add runtime + enable config.
4. Map `/secure` route.
5. Start server.
6. (Optional) Tune via `Set-KrServerHttpsOptions` for protocols or client certificate mode.

## Try it

```powershell
curl -k https://127.0.0.1:5443/secure

Invoke-WebRequest -Uri https://127.0.0.1:5443/secure -SkipCertificateCheck | Select-Object -ExpandProperty Content
```

`-k` skips trust validation for an untrusted self‑signed cert.

## Cmdlet references

- [New-KrSelfSignedCertificate][New-KrSelfSignedCertificate]
- [New-KrServer][New-KrServer]
- [Add-KrListener][Add-KrListener]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Set-KrServerHttpsOptions][Set-KrServerHttpsOptions]
- [Start-KrServer][Start-KrServer]

## Troubleshooting

| Symptom | Cause | Fix |
|---------|-------|-----|
| curl cert warning | Self-signed cert | Use `-k` or trust cert locally |
| HTTPS listener fails | Wrong password | Re-enter secure string / recreate PFX |
| Route works on HTTP not HTTPS | Only added HTTP listener | Add second listener before enabling config |

See also: [Certificates](../6.certificates/index) · [Logging](../5.logging/index)

---

### Next

Continue to [Named Pipes](./4.Named-Pipes).

[7.3-Https.ps1]: /pwsh/tutorial/examples/7.3-Https.ps1
[New-KrSelfSignedCertificate]: /pwsh/cmdlets/New-KrSelfSignedCertificate
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrListener]: /pwsh/cmdlets/Add-KrListener
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Set-KrServerHttpsOptions]: /pwsh/cmdlets/Set-KrServerHttpsOptions
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
