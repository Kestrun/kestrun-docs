---
title: Basic Server
parent: Endpoints
nav_order: 1
---

# Basic Server

Minimal server: one HTTP listener (loopback:5000) + a single PowerShell route returning text.

> Prerequisites: see [Introduction][Introduction].

## Full source

File: [`pwsh/tutorial/examples/7.1-Basic-Server.ps1`][7.1-Basic-Server.ps1]

```powershell
{% include examples/pwsh/7.1-Basic-Server.ps1 %}
```

## Step-by-step

1. Server: `New-KrServer` creates a named instance.
2. Listener: `Add-KrListener -Port 5000 -IPAddress Loopback` binds HTTP.
3. Runtime: `Add-KrPowerShellRuntime` enables script block routes.
4. Commit: `Enable-KrConfiguration` applies staged listener/runtime.
5. Route: `Add-KrMapRoute` registers `/hello` using `Write-KrTextResponse`.
6. Start: `Start-KrServer` begins processing (Ctrl+C to stop).
7. Logging (optional): console logger shows `Write-KrLog` events.

## Try it

```powershell
curl http://127.0.0.1:5000/hello
Invoke-WebRequest -Uri http://127.0.0.1:5000/hello | Select-Object -ExpandProperty Content
```

Expected: `Hello from basic server`.

## Cmdlet references

- [New-KrServer][New-KrServer]
- [Add-KrListener][Add-KrListener]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Write-KrTextResponse][Write-KrTextResponse]
- [Start-KrServer][Start-KrServer]
- [Write-KrLog][Write-KrLog]

## Troubleshooting

| Symptom | Cause | Fix |
|---------|-------|-----|
| 404 Not Found | Wrong route pattern | Ensure pattern starts with `/` and matches request |
| Port in use | Another process bound to 5000 | Use a different port (`-Port 5001`) |
| No logs shown | Logger not default | Add logger and `-SetAsDefault` |

See also: [Routes](../2.routes/index) Â· [Simple Logging](../5.logging/1.Simple-Logging)

---

### Next

{: .fs-4 .fw-500}

Continue to [Multiple Listeners](./2.Multiple-Listeners).

[7.1-Basic-Server.ps1]: /pwsh/tutorial/examples/7.1-Basic-Server.ps1
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrListener]: /pwsh/cmdlets/Add-KrListener
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Write-KrTextResponse]: /pwsh/cmdlets/Write-KrTextResponse
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Write-KrLog]: /pwsh/cmdlets/Write-KrLog
[Introduction]: ../1.introduction/index#prerequisites
