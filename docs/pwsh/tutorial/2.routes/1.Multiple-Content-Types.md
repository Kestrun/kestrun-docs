---
title: Multiple Content Types
parent: Routes
nav_order: 1
---

# Multiple Content Types

Return text, JSON, XML, and YAML from different routes.

> Prerequisites: see [Introduction][Introduction].

## Full source

File: [`pwsh/tutorial/examples/2.1-Multiple-Content-Types.ps1`][2.1-Multiple-Content-Types.ps1]

```powershell
{% include examples/pwsh/2.1-Multiple-Content-Types.ps1 %}
```

## Step-by-step

1. Initialize root: `Initialize-KrRoot -Path $PSScriptRoot` so relative paths resolve predictably.
2. Create server and listener: `New-KrServer`; `Add-KrEndpoint -Port 5000 -IPAddress Loopback`.
3. Enable PowerShell runtime: `Add-KrPowerShellRuntime` so PS routes execute.
4. Apply config: `Enable-KrConfiguration` commits staged listeners and runtime.
5. Map routes and choose a content helper per route:
      - GET `/hello` → [Write-KrTextResponse][Write-KrTextResponse] (Content-Type: text/plain)
      - GET `/hello-json` → [Write-KrJsonResponse][Write-KrJsonResponse] (application/json)
      - GET `/hello-xml` → [Write-KrXmlResponse][Write-KrXmlResponse] (application/xml)
      - GET `/hello-yaml` → [Write-KrYamlResponse][Write-KrYamlResponse] (application/x-yaml)
      Each helper accepts optional parameters like `-StatusCode`, and some accept `-Headers`.
6. Start server: `Start-KrServer` begins processing requests.

## Try it

Save the sample locally so it’s easy to run. Copy the contents of
[`pwsh/tutorial/examples/2.1-Multiple-Content-Types.ps1`][2.1-Multiple-Content-Types.ps1]
into a new file in an empty working folder (for example, `content-types.ps1`), then run:

```powershell
# From your working folder
pwsh .\content-types.ps1
curl http://127.0.0.1:5000/hello
curl http://127.0.0.1:5000/hello-json
curl http://127.0.0.1:5000/hello-xml
curl http://127.0.0.1:5000/hello-yaml
```

PowerShell alternatives:

```powershell
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello' | Select-Object -ExpandProperty Content
Invoke-RestMethod -Uri 'http://127.0.0.1:5000/hello-json'             # auto-parses JSON
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-xml'  | Select-Object -ExpandProperty Content
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-yaml' | Select-Object -ExpandProperty Content
```

## Cmdlet references

- [Write-KrTextResponse][Write-KrTextResponse]
- [Write-KrJsonResponse][Write-KrJsonResponse]
- [Write-KrXmlResponse][Write-KrXmlResponse]
- [Write-KrYamlResponse][Write-KrYamlResponse]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Start-KrServer][Start-KrServer]

## Troubleshooting

- JSON not parsed by Invoke‑WebRequest: prefer Invoke‑RestMethod for JSON content.
- YAML shown as raw text: that’s expected; PowerShell doesn’t auto‑parse YAML by default.

---

### Next

{: .fs-4 .fw-500}

Continue to [Multi-Language-Routes][Next] or explore more advanced patterns with middleware later in the tutorial.

[2.1-Multiple-Content-Types.ps1]: /pwsh/tutorial/examples/2.1-Multiple-Content-Types.ps1
[Write-KrTextResponse]: /pwsh/cmdlets/Write-KrTextResponse
[Write-KrJsonResponse]: /pwsh/cmdlets/Write-KrJsonResponse
[Write-KrXmlResponse]: /pwsh/cmdlets/Write-KrXmlResponse
[Write-KrYamlResponse]: /pwsh/cmdlets/Write-KrYamlResponse
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Next]: ./2.Multi-Language-Routes
[Introduction]: ../1.introduction/index#prerequisites
