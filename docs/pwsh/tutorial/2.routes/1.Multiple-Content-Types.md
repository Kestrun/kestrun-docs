---
title: Multiple Content Types
parent: Routes
nav_order: 1
---

# Multiple Content Types

Return text, JSON, XML, and YAML from different routes.

> Prerequisites: see [Introduction][Introduction].

## Full source

File: [`docs/pwsh/tutorial/examples/2.1-Multiple-Content-Types.ps1`][2.1-Multiple-Content-Types.ps1]

```powershell
{% include_relative ../examples/2.1-Multiple-Content-Types.ps1 %}
```

## Step-by-step

- The server configuration mirrors Sample 1 (host, listener, runtime, configuration).
- Four routes demonstrate content helpers that set the Content‑Type header and serialize for you:
      - [Write-KrTextResponse][Write-KrTextResponse] — writes text/plain
      - [Write-KrJsonResponse][Write-KrJsonResponse] — application/json via JSON serialization
      - [Write-KrXmlResponse][Write-KrXmlResponse] — application/xml via XML serialization
      - [Write-KrYamlResponse][Write-KrYamlResponse] — application/x‑yaml via YAML serialization
- Each helper also accepts a -StatusCode parameter.

## Try it

### Server

```powershell
. .\docs\pwsh\tutorial\examples\2.1-Multiple-Content-Types.ps1
```

### Client

#### curl

```powershell
curl http://127.0.0.1:5000/hello
curl http://127.0.0.1:5000/hello-json
curl http://127.0.0.1:5000/hello-xml
curl http://127.0.0.1:5000/hello-yaml
```

#### PowerShell

```powershell
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello' | Select-Object -ExpandProperty Content
Invoke-RestMethod -Uri 'http://127.0.0.1:5000/hello-json'             # auto-parses JSON
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-xml'  | Select-Object -ExpandProperty Content
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-yaml' | Select-Object -ExpandProperty Content
```

## Cmdlet references

- [Write-KrTextResponse][Write-KrTextResponse]
- [Write-KrJsonResponse][Write-KrJsonResponse]
- [Write-KrXmlResponse][Write-KrXmlResponse]
- [Write-KrYamlResponse][Write-KrYamlResponse]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Start-KrServer][Start-KrServer]

## Troubleshooting

- JSON not parsed by Invoke‑WebRequest: prefer Invoke‑RestMethod for JSON content.
- YAML shown as raw text: that’s expected; PowerShell doesn’t auto‑parse YAML by default.

---

### Next

{: .fs-4 .fw-500}

Continue to [Multi-Language-Routes][Next] or explore more advanced patterns with middleware later in the tutorial.

[Write-KrTextResponse]: /docs/pwsh/cmdlets/Write-KrTextResponse
[Write-KrJsonResponse]: /docs/pwsh/cmdlets/Write-KrJsonResponse
[Write-KrXmlResponse]: /docs/pwsh/cmdlets/Write-KrXmlResponse
[Write-KrYamlResponse]: /docs/pwsh/cmdlets/Write-KrYamlResponse
[Add-KrMapRoute]: /docs/pwsh/cmdlets/Add-KrMapRoute
[Start-KrServer]: /docs/pwsh/cmdlets/Start-KrServer
[Next]: ./2.Multi-Language-Routes
[2.1-Multiple-Content-Types.ps1]: /docs/pwsh/tutorial/examples/2.1-Multiple-Content-Types.ps1
[Introduction]: [./Introduction#prerequisites]
