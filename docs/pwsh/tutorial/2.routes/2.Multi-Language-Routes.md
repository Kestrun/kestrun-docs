---
title: Multi-language Routes (PS/C#/VB)
parent: Routes
nav_order: 2
---

# Multi-language Routes (PS/C#/VB)

Map routes in PowerShell and implement others inline in C# or VB.NET.

> Prerequisites: see [Introduction][Introduction].

## Full source

File: [`pwsh/tutorial/examples/2.2-Multi-Language-Routes.ps1`][2.2-Multi-Language-Routes.ps1]

```powershell
{% include examples/pwsh/2.2-Multi-Language-Routes.ps1 %}
```

## Step-by-step

1. Initialize root: `Initialize-KrRoot -Path $PSScriptRoot`.
2. Server + listener: `New-KrServer`; `Add-KrEndpoint -Port 5000 -IPAddress Loopback`.
3. Enable configuration: `Enable-KrConfiguration`.
4. Map routes in multiple languages with distinct paths:
    - PowerShell: GET `/hello-powershell` with `-ScriptBlock { Write-KrTextResponse 'Hello from PS' }`.
    - C#: GET `/hello-csharp` with `-Language CSharp -Code @" ... @"`; code can access `Context`, `Request`, `Response` and call helpers like [WriteTextResponseAsync][WriteTextResponseAsync].
    - VB.NET: GET `/hello-vbnet` with `-Language VBNet -Code @" ... @"` following a similar pattern.
5. Start the server: `Start-KrServer`.
6. Route precedence: if multiple routes share the same verb and pattern, the last
    registered typically wins. Use different paths (e.g., `/hello-ps`, `/hello-cs`,
    `/hello-vb`) if you want to hit each explicitly.

## Try it

Save the sample locally so it’s easy to run. Copy the contents of
[`pwsh/tutorial/examples/2.2-Multi-Language-Routes.ps1`][2.2-Multi-Language-Routes.ps1]
into a new file in an empty working folder (for example, `multi-language.ps1`), then run:

```powershell
# From your working folder
pwsh .\multi-language.ps1
curl http://127.0.0.1:5000/hello-powershell
curl http://127.0.0.1:5000/hello-csharp
curl http://127.0.0.1:5000/hello-vbnet
```

PowerShell alternative:

```powershell
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-powershell' | Select-Object -ExpandProperty Content
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-csharp' | Select-Object -ExpandProperty Content
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/hello-vbnet' | Select-Object -ExpandProperty Content
```

## Troubleshooting

- 404 Not Found: Make sure you’re calling one of the defined paths exactly:
    `/hello-powershell`, `/hello-csharp`, or `/hello-vbnet`.
- Port in use: Change `-Port` in `Add-KrEndpoint` or stop the conflicting process.
- Binding issues: Use `-IPAddress Loopback` for local-only testing or `Any` for LAN access.
- Nothing prints: Ensure you ran `Enable-KrConfiguration` before `Start-KrServer`.

## References

- [Add-KrMapRoute][Add-KrMapRoute]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Start-KrServer][Start-KrServer]
- [Write-KrTextResponse][Write-KrTextResponse]

---

### Previous / Next

{: .fs-4 .fw-500}

Go back to [Multiple Content Types][Previous] or continue to [Route Parameters][Next].

[2.2-Multi-Language-Routes.ps1]: /pwsh/tutorial/examples/2.2-Multi-Language-Routes.ps1
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Write-KrTextResponse]: /pwsh/cmdlets/Write-KrTextResponse
[WriteTextResponseAsync]: /cs/api/Kestrun.Models/KestrunResponse/WriteTextResponseAsync
[Previous]: ./1.Multiple-Content-Types
[Next]: ./3.Route-Parameters
[Introduction]: ../1.introduction/index#prerequisites
