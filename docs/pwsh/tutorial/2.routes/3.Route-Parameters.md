---
title: Route Parameters & Request Data
parent: Routes
nav_order: 3
---

# Route Parameters & Request Data

Read data from different parts of the incoming HTTP request: path (route) parameters, query string, body (form / JSON), headers, and cookies.

> Prerequisites: see [Introduction][Introduction].

## Full source

File: [`pwsh/tutorial/examples/2.3-Route-Parameters.ps1`][2.3-Route-Parameters.ps1]

```powershell
{% include examples/pwsh/2.3-Route-Parameters.ps1 %}
```

## Step-by-step

1. Initialize root and base setup: `Initialize-KrRoot -Path $PSScriptRoot`, `New-KrServer`,
    `Add-KrEndpoint -Port 5000 -IPAddress Loopback`, `Add-KrPowerShellRuntime`, then `Enable-KrConfiguration`.
2. Path (route) parameter:
    - Pattern `/input/{value}` declares a placeholder.
    - Use [Get-KrRequestRouteParam][Get-KrRequestRouteParam] -Name value to retrieve it.
3. Query string:
    - Same resource at `/input` but read `?value=something` via [Get-KrRequestQuery][Get-KrRequestQuery].
4. Body (JSON or form):
    - POST `/input` with JSON `{ "value": "BodyData" }`.
    - Read with [Get-KrRequestBody][Get-KrRequestBody]. Ensure `Content-Type: application/json` for JSON.
5. Header:
    - Send `value: HeaderData` header; read via [Get-KrRequestHeader][Get-KrRequestHeader].
6. Cookie:
    - Send a cookie `value=CookieData`; read via [Get-KrRequestCookie][Get-KrRequestCookie].
7. Response helper:
    - All examples finish with [Write-KrTextResponse][Write-KrTextResponse] for a plain text 200 OK response.

> Route overlap note: If multiple GET routes share the identical pattern and Method.
Only one can ultimately match; the last registered with the same verb typically wins.

## Try it

Save the sample locally so it’s easy to run. Copy the contents of
[`pwsh/tutorial/examples/2.3-Route-Parameters.ps1`][2.3-Route-Parameters.ps1]
into a new file in an empty working folder (for example, `route-params.ps1`), then run:

```powershell
# From your working folder
pwsh .\route-params.ps1
```

Now exercise each input type:

### Path parameter

```powershell
curl http://127.0.0.1:5000/input/HelloPath
Invoke-WebRequest -Uri 'http://127.0.0.1:5000/input/HelloPath' | Select-Object -ExpandProperty Content
```

### Query string

```powershell
curl -X PATCH "http://127.0.0.1:5000/input?value=HelloQuery"
Invoke-WebRequest -Method Patch -Uri 'http://127.0.0.1:5000/input?value=HelloQuery' | Select-Object -ExpandProperty Content
```

### Body (POST JSON)

```powershell
curl -X POST http://127.0.0.1:5000/input -H "Content-Type: application/json" -d '{"value":"HelloBody"}'
Invoke-RestMethod -Method Post -Uri 'http://127.0.0.1:5000/input' -Body (@{ value = 'HelloBody' } | ConvertTo-Json) -ContentType 'application/json'
```

### Header

```powershell
curl -X PUT -H "value: HelloHeader" http://127.0.0.1:5000/input
Invoke-WebRequest -Method Put -Uri 'http://127.0.0.1:5000/input' -Headers @{ value = 'HelloHeader' } | Select-Object -ExpandProperty Content
```

### Cookie

```powershell
curl -X DELETE --cookie "value=HelloCookie" http://127.0.0.1:5000/input
# PowerShell (Invoke-WebRequest doesn't have a simple inline cookie flag; use a WebSession)
$session = New-Object Microsoft.PowerShell.Commands.WebRequestSession
$cookie = New-Object System.Net.Cookie 'value','HelloCookie','/','127.0.0.1'
$session.Cookies.Add($cookie)
Invoke-WebRequest -Method Delete -Uri 'http://127.0.0.1:5000/input' -WebSession $session | Select-Object -ExpandProperty Content
```

## Cmdlet / API references

- [Add-KrMapRoute][Add-KrMapRoute]
- [Get-KrRequestRouteParam][Get-KrRequestRouteParam]
- [Get-KrRequestQuery][Get-KrRequestQuery]
- [Get-KrRequestBody][Get-KrRequestBody]
- [Get-KrRequestHeader][Get-KrRequestHeader]
- [Get-KrRequestCookie][Get-KrRequestCookie]
- [Write-KrTextResponse][Write-KrTextResponse]
- [Start-KrServer][Start-KrServer]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]

## Troubleshooting

| Symptom                        | Likely Cause                                                           | Fix                                                                             |
|--------------------------------|------------------------------------------------------------------------|---------------------------------------------------------------------------------|
| Path value is `$null`          | Typo in `{value}` segment or used `/input` instead of `/input/<value>` | Call the correct URL or match placeholder name exactly.                         |
| Query value is `$null`         | Missing `?value=` param                                                | Append `?value=YourData` to the URL.                                            |
| Body value is `$null`          | Wrong content type or JSON property name                               | Send `Content-Type: application/json` and match property casing.                |
| Header value is `$null`        | Header not sent or case mismatch                                       | Add `-H "value: Data"`; header names are case‑insensitive but spelling matters. |
| Cookie value is `$null`        | Cookie not sent to server domain/path                                  | Ensure cookie domain matches listener (127.0.0.1) and path `/`.                 |
| Only one GET /input test works | Duplicate GET routes with same pattern override                        | Use distinct patterns (see adjustments) or different verbs.                     |

---

### Next

{: .fs-4 .fw-500}

Continue to [Route Options][Next] or explore more advanced patterns with middleware later in the tutorial.

[2.3-Route-Parameters.ps1]: /pwsh/tutorial/examples/2.3-Route-Parameters.ps1
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Get-KrRequestRouteParam]: /pwsh/cmdlets/Get-KrRequestRouteParam
[Get-KrRequestQuery]: /pwsh/cmdlets/Get-KrRequestQuery
[Get-KrRequestBody]: /pwsh/cmdlets/Get-KrRequestBody
[Get-KrRequestHeader]: /pwsh/cmdlets/Get-KrRequestHeader
[Get-KrRequestCookie]: /pwsh/cmdlets/Get-KrRequestCookie
[Write-KrTextResponse]: /pwsh/cmdlets/Write-KrTextResponse
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Next]: ./4.Route-Options
[Introduction]: ../1.introduction/index#prerequisites
