---
title: Server Options
parent: Server Configuration
nav_order: 2
---

# Server Options

Configure runtime behaviors (headers, compression, runspaces) with `Set-KrServerOptions`.

> Prerequisites: [Endpoints](../7.endpoints/index) basics; review [Logging](../5.logging/index) to observe effects.

## Full source

File: [`pwsh/tutorial/examples/13.2-Server-Options.ps1`][13.2-Server-Options.ps1]

```powershell
{% include examples/pwsh/13.2-Server-Options.ps1 %}
```

## Step-by-step

1. Create server + listener.
2. Add runtime & enable configuration.
3. Apply options (remove server header, adjust runspace pool, etc.).
4. Map `/meta` route displaying current runspace count.
5. Start server.

## Common flags

| Option | Purpose |
|--------|---------|
| -DenyServerHeader | Remove Server header |
| -AllowSynchronousIO | Permit legacy sync IO (avoid unless required) |
| -DisableResponseHeaderCompression | Debug proxies / diagnostics |
| -MaxRunspaces / -MinRunspaces | Script concurrency tuning |

## Try it

```powershell
curl http://127.0.0.1:5001/meta
```

## Cmdlet references

- [Set-KrServerOptions][Set-KrServerOptions]
- [New-KrServer][New-KrServer]
- [Add-KrListener][Add-KrListener]
- [Add-KrPowerShellRuntime][Add-KrPowerShellRuntime]
- [Enable-KrConfiguration][Enable-KrConfiguration]
- [Add-KrMapRoute][Add-KrMapRoute]
- [Write-KrJsonResponse][Write-KrJsonResponse]
- [Start-KrServer][Start-KrServer]

## Troubleshooting

| Symptom | Cause | Fix |
|---------|-------|-----|
| Still see Server header | Option applied after start | Apply before `Start-KrServer` |
| High CPU | Too many runspaces | Reduce `-MaxRunspaces` |
| Slow throughput | Too few runspaces | Increase `-MaxRunspaces` |

See also: [Server Limits](./1.Server-Limits) Â· [Logging](../5.logging/index)

---

### Next

Proceed to [Demos](../14.demos/index).

[13.2-Server-Options.ps1]: /pwsh/tutorial/examples/13.2-Server-Options.ps1
[Set-KrServerOptions]: /pwsh/cmdlets/Set-KrServerOptions
[New-KrServer]: /pwsh/cmdlets/New-KrServer
[Add-KrListener]: /pwsh/cmdlets/Add-KrListener
[Add-KrPowerShellRuntime]: /pwsh/cmdlets/Add-KrPowerShellRuntime
[Enable-KrConfiguration]: /pwsh/cmdlets/Enable-KrConfiguration
[Add-KrMapRoute]: /pwsh/cmdlets/Add-KrMapRoute
[Write-KrJsonResponse]: /pwsh/cmdlets/Write-KrJsonResponse
[Start-KrServer]: /pwsh/cmdlets/Start-KrServer
